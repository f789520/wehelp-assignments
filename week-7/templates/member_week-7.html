<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>會員登入系統</title>
    <style type="text/css">
        .head {
            display: flex;
            background-color: #b7e8ff;
            font-size: 40px;
            justify-content: center;
            align-items: center;
            height: 100px;
        }

        .headtext {
            text-align: center;
            font-size: 30px;
            font: bold;
        }


        .login {
            text-align: center;
            font-size: 25px;
            font: bold;
            margin-top: 20px;
        }

        .button {
            text-align: center;

            font: bold;
            margin-top: 20px;
        }
    </style>
</head>

<body>

    <div class="head">
        <div class="headtext">歡迎光臨，這是會員頁 </div>
    </div>

    <div class="login">
        <div style="font-size: 25px;">{{nickname}}，歡迎登入系統 </div>
        <br />
        <a href="http://127.0.0.1:3000/signout">登出系統</a>
    </div>

    <div class="login">
        <div style="font-weight:bolder;">查詢會員姓名
        </div>

        <input style=margin:10px;padding:5px; type='text' name='username' id='username'>
        <button onclick="getData()">查詢</button>
        <br />
        <div id="finall"></div>
    </div>

    <script>
        let finall=document.getElementById("finall");

        function getData() {
            const usernameElement = document.getElementById('username')
            const username = usernameElement.value;    //https://pjchender.blogspot.com/2015/11/javascript.html
            fetch("http://127.0.0.1:3000//api/members?username=" + username)   //發送query string
                .then(function (response) {
                    // console.log(response)
                    // console.log(username)
                    // return response.text();
                    return response.json();
                })
                .then(function(result) {
                    // document.getElementById("username").innerHTML = result
                    console.log(result);
                    // finall.innerHTML="";
                    // let username;
                    // username=result[0]
                    finall.innerHTML=result.name+" ("+result.username+")"
                });
        }
    </script>
</body>

</html>